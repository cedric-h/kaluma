#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>
#include "tone_map.h"

char *examples[] = {
  "166.66666666666666,\n"
  "166.66666666666666: a4^166.66666666666666,\n"
  "5000",

  "379.746835443038: d4^379.746835443038 + c5~379.746835443038,\n"
  "379.746835443038: b4~379.746835443038 + e4^379.746835443038 + g5/379.746835443038,\n"
  "379.746835443038: c5~379.746835443038,\n"
  "379.746835443038: d5~379.746835443038 + f4^379.746835443038 + b5/379.746835443038,\n"
  "379.746835443038: e5~379.746835443038 + g5/379.746835443038,\n"
  "379.746835443038: e4^379.746835443038 + a5/379.746835443038,\n"
  "379.746835443038: d5~379.746835443038,\n"
  "379.746835443038: c5~379.746835443038 + d4^379.746835443038 + g5/379.746835443038,\n"
  "379.746835443038: b4~379.746835443038,\n"
  "379.746835443038: b5/379.746835443038,\n"
  "379.746835443038: g5/379.746835443038,\n"
  "379.746835443038: b4~379.746835443038 + f4^379.746835443038 + a5/379.746835443038,\n"
  "379.746835443038: c5~379.746835443038,\n"
  "379.746835443038: d5~379.746835443038 + e4^379.746835443038,\n"
  "379.746835443038: g5/379.746835443038,\n"
  "379.746835443038: b4~379.746835443038 + d4^379.746835443038 + b5/379.746835443038,\n"
  "379.746835443038: a4~379.746835443038 + g5/379.746835443038,\n"
  "379.746835443038: g4~379.746835443038 + c4^379.746835443038 + a5/379.746835443038,\n"
  "379.746835443038: g5/379.746835443038 + a4~379.746835443038 + d4^379.746835443038,\n"
  "379.746835443038: g4~379.746835443038,\n"
  "379.746835443038: g5/379.746835443038 + e4^379.746835443038,\n"
  "379.746835443038: a4~379.746835443038,\n"
  "379.746835443038: b5/379.746835443038 + f4^379.746835443038 + b4~379.746835443038,\n"
  "379.746835443038: g5/379.746835443038 + c5~379.746835443038,\n"
  "379.746835443038: a5/379.746835443038 + e4^379.746835443038 + d5~379.746835443038,\n"
  "379.746835443038,\n"
  "379.746835443038: d4^379.746835443038 + c5~379.746835443038,\n"
  "379.746835443038: g5/379.746835443038 + b4~379.746835443038,\n"
  "379.746835443038: c4^379.746835443038 + a4~379.746835443038,\n"
  "379.746835443038: b5/379.746835443038 + d4^379.746835443038,\n"
  "379.746835443038: g5/379.746835443038 + e4^379.746835443038 + a4~379.746835443038,\n"
  "379.746835443038: a5/379.746835443038 + f4^379.746835443038 + b4~379.746835443038",

  "166.66666666666666,\n"
  "166.66666666666666: c5-166.66666666666666,\n"
  "166.66666666666666: b4-166.66666666666666,\n"
  "4833.333333333333",

  "500,\n"
  "500: c5~500,\n"
  "500: d5~500,\n"
  "500: e5~500,\n"
  "14000",

  "166.66666666666666,\n"
  "166.66666666666666: c5~166.66666666666666,\n"
  "166.66666666666666: d5~166.66666666666666,\n"
  "166.66666666666666: e5~166.66666666666666,\n"
  "166.66666666666666: b4~166.66666666666666,\n"
  "166.66666666666666: c5~166.66666666666666,\n"
  "166.66666666666666: d5~166.66666666666666,\n"
  "166.66666666666666: e5~166.66666666666666,\n"
  "166.66666666666666: d5~166.66666666666666,\n"
  "166.66666666666666: c5~166.66666666666666,\n"
  "166.66666666666666,\n"
  "166.66666666666666: b4~166.66666666666666,\n"
  "166.66666666666666: e5~166.66666666666666,\n"
  "166.66666666666666: c5~166.66666666666666,\n"
  "3000",

  "166.66666666666666\n"
};

int main(void) {
  NoteReadState nrs = {0};

  for (int i = 0; i < ARR_LEN(examples); i++) {
    printf("--- EXAMPLE %d ---\n", i);

    memset(&nrs, 0, sizeof(nrs));
    nrs.str = examples[i];
    do {
      printf("%ld chars left\n", strlen(examples[i]) - (nrs.str - examples[i]));
    } while (tune_parse(&nrs));
  }

  return 0;
}
